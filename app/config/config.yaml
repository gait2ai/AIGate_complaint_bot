# AI Gate for Artificial Intelligence Applications
# Institution Complaint Management Bot: Configuration File

# ------------------------------------------
# Institution Information
# ------------------------------------------
institution:
  name: "مؤسسة الأمل للتنمية" # Customizable: Institution's official name (primary, e.g., Arabic)
  name_ar: "مؤسسة الأمل للتنمية" # Customizable: Explicit Arabic name for the institution
  name_en: "Al-Amal Development Foundation" # Customizable: Explicit English name for the institution

  # Contact details that can be used in messages
  contact:
    phone: "+967 XXX XXXXXX"     # Customizable
    email: "info@alamaldev.org" # Customizable
    address: "شارع الزبيري، صنعاء، اليمن"  # Customizable: Address in Arabic
    address_en: "Al-Zubairy St, Sana'a, Yemen" # Customizable: Address in English

  description: "مؤسسة تهدف إلى تقديم خدمات متميزة للمستفيدين ودعم التنمية المجتمعية." # Customizable
  website: "https://alamaldev.org/" # Customizable
  timezone: "Asia/Aden" # IMPORTANT: Set to the institution's local timezone (e.g., Asia/Riyadh, Africa/Cairo)
  primary_language: "ar" # MODIFIED: Ensures Arabic is the default if user's lang_code is not detected or not 'en'

# ------------------------------------------
# Institution Bot Specific Settings
# ------------------------------------------
institution_bot_settings:
  critical_complaint_email: "alerts@alamaldev.org" # Customizable: Email for critical complaint notifications

# ------------------------------------------
# User-Facing Messages (Customizable Overrides & New Messages)
# These override DEFAULT_MESSAGES in bot_telegram_handlers.py or define new ones.
# ------------------------------------------
custom_messages:
  ar:
    # --- MODIFIED: New Welcome Message and Options ---
    guest: "ضيفنا الكريم" # Fallback if user.first_name is not available
    welcome_options: "مرحباً بك {user_name} في بوت {institution_name}.\nهذا البوت مخصص لاستقبال الشكاوى والاقتراحات والملاحظات المتعلقة بخدماتنا.\n\nالرجاء تحديد أحد الخيارات التالية:"
    option_complaint: "📝 تقديم شكوى"
    option_suggestion: "💡 تقديم اقتراح"
    option_feedback: "📋 تقديم ملاحظة"
    complaint_initiated: "جاري بدء عملية تقديم الشكوى..."

    # --- Other messages (can override defaults or be new) ---
    use_existing_data: "بيانات ملفك الشخصي موجودة لدينا. هل ترغب باستخدامها (الاسم، الهاتف، إلخ)؟"
    enter_name: "الرجاء إدخال اسمك الكامل (ثلاثة مقاطع على الأقل):"
    enter_sex: "الرجاء تحديد جنسك:"
    enter_phone: "الرجاء إدخال رقم هاتفك (مع رمز الدولة إذا كنت خارج البلاد):"
    enter_residence: "الرجاء تحديد وضع إقامتك الحالي:"
    enter_governorate: "الرجاء إدخال اسم المحافظة:"
    enter_directorate: "الرجاء إدخال اسم المديرية:"
    enter_village: "الرجاء إدخال اسم القرية أو المنطقة:"
    enter_complaint_details: "الآن، يرجى كتابة تفاصيل شكواك بوضوح:"
    enter_suggestion_details: "يرجى كتابة تفاصيل اقتراحك:"
    enter_feedback_details: "يرجى كتابة ملاحظاتك:",
    confirm_submission_prompt: "البيانات التي أدخلتها جاهزة للإرسال. هل تؤكد الإرسال؟"
    complaint_summary_header: "📋 ملخص البيانات:"
    name_label: "الاسم"
    sex_label: "الجنس"
    phone_label: "الهاتف"
    residence_label: "الإقامة"
    governorate_label: "المحافظة"
    directorate_label: "المديرية"
    village_label: "القرية/المنطقة"
    complaint_text_label: "نص الشكوى"
    critical_intro: "تنبيه: تم تحديد شكواك كحالة قد تكون حرجة. سيتم التعامل معها بأولوية من قبل فريق {institution_name}."
    critical_name: "للحالات الحرجة، يرجى تأكيد أو إدخال اسمك:"
    critical_phone: "للحالات الحرجة، يرجى تأكيد أو إدخال رقم هاتفك:"
    critical_registered: "تم تسجيل الحالة الحرجة بنجاح. سيتواصل معك أحد موظفي {institution_name} في أقرب وقت ممكن."
    complaint_success: "شكراً لك! تم استلام شكواك بنجاح وسيتم مراجعتها من قبل فريق {institution_name}."
    suggestion_success: "شكراً لك! تم استلام اقتراحك وسيؤخذ بعين الاعتبار."
    feedback_success: "شكراً لك! تم استلام ملاحظاتك."
    restart_data_entry: "تم إلغاء الإدخال الحالي. لنبدأ من جديد بجمع بياناتك الشخصية لتقديم الشكوى."
    cancelled: "تم إلغاء العملية الحالية. يمكنك البدء من جديد باستخدام /start."
    error: "عفواً، حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى لاحقاً. إذا استمرت المشكلة، يمكنك التواصل مع دعم {institution_name}."
    help_header: "مساعدة بوت {institution_name}"
    help_text: "يمكنك استخدام هذا البوت لتقديم:\n- شكوى (/complaint)\n- اقتراح (/suggestion)\n- ملاحظة (/feedback)\n\nأوامر أخرى:\n/start - عرض الخيارات الرئيسية\n/contact - معلومات الاتصال بالمؤسسة\n/cancel - إلغاء أي عملية جارية"
    contact_header: "معلومات التواصل مع {institution_name}"
    contact_details: "للتواصل مع {institution_name}:\nالهاتف: {phone}\nالبريد الإلكتروني: {email}\nالعنوان: {address}"
    complaint_intent_detected: "أهلاً بك. إذا كنت ترغب في تقديم شكوى، يمكنك اختيار 'تقديم شكوى' من القائمة أو استخدام الأمر /complaint."
    suggestion_intent_detected: "أهلاً بك. إذا كنت ترغب في تقديم اقتراح، يمكنك اختيار 'تقديم اقتراح' من القائمة أو استخدام الأمر /suggestion."
    contact_intent_detected: "أهلاً بك! إذا كنت تبحث عن معلومات الاتصال الخاصة بـ {institution_name}، يمكنك استخدام الأمر /contact مباشرة."
    off_topic: "مرحباً! هذا البوت مخصص لاستقبال الشكاوى، الاقتراحات، والملاحظات المتعلقة بخدمات {institution_name}. للمساعدة، استخدم الأمر /help."
    invalid_name: "الاسم المدخل غير صحيح. يرجى إدخال اسم ثنائي على الأقل." # تم التعديل إلى ثنائي
    invalid_phone: "رقم الهاتف المدخل غير صحيح. يرجى التأكد من إدخال رقم هاتف صالح."
    yes: 'نعم'
    no: 'لا'
    male: 'ذكر'
    female: 'أنثى'
    resident: 'مقيم'
    idp: 'نازح'
    returnee: 'عائد'
    residence_explanation: "مقيم: تعيش في منطقتك الأصلية.\nنازح: انتقلت من منطقة سكنك الأصلية بسبب الظروف.\nعائد: عدت إلى منطقة سكنك الأصلية بعد فترة نزوح."

  en:
    # --- MODIFIED: New Welcome Message and Options ---
    guest: "Guest" # Fallback if user.first_name is not available
    welcome_options: "Welcome {user_name} to the {institution_name} bot.\nThis bot is for submitting complaints, suggestions, and feedback regarding our services.\n\nPlease select one of the following options:"
    option_complaint: "📝 Submit Complaint"
    option_suggestion: "💡 Submit Suggestion"
    option_feedback: "📋 Submit Feedback"
    complaint_initiated: "Starting the complaint submission process..."

    # --- Other messages (can override defaults or be new) ---
    use_existing_data: "We have your profile data (Name, Phone, etc.). Would you like to use it?"
    enter_name: "Please enter your full name (at least two words):"
    enter_sex: "Please select your gender:"
    enter_phone: "Please enter your phone number (include country code if international):"
    enter_residence: "Please select your current residency status:"
    enter_governorate: "Please enter your governorate:"
    enter_directorate: "Please enter your directorate/district:"
    enter_village: "Please enter your village or area:"
    enter_complaint_details: "Now, please clearly describe the details of your complaint:"
    enter_suggestion_details: "Please describe your suggestion:"
    enter_feedback_details: "Please provide your feedback:",
    confirm_submission_prompt: "The data you entered is ready for submission. Do you confirm?"
    complaint_summary_header: "📋 Data Summary:"
    name_label': "Name"
    sex_label': "Gender"
    phone_label': "Phone"
    residence_label': "Residency"
    governorate_label': "Governorate"
    directorate_label': "Directorate"
    village_label': "Village/Area"
    complaint_text_label': "Complaint Text"
    critical_intro: "Attention: Your submission has been identified as a potentially critical case. It will be prioritized by the {institution_name} team."
    critical_name: "For critical cases, please confirm or enter your name:"
    critical_phone: "For critical cases, please confirm or enter your phone number:"
    critical_registered: "The critical case has been successfully registered. A representative from {institution_name} will contact you shortly."
    complaint_success: "Thank you! Your complaint has been successfully received and will be reviewed by the {institution_name} team."
    suggestion_success: "Thank you! Your suggestion has been received and will be considered."
    feedback_success: "Thank you! Your feedback has been received."
    restart_data_entry: "Current data entry cancelled. Let's start over with your personal information to submit the complaint."
    cancelled: "The current operation has been cancelled. You can start again using /start."
    error: "Sorry, an unexpected error occurred. Please try again later. If the problem persists, you can contact {institution_name} support."
    help_header': "{institution_name} Bot Help"
    help_text': "You can use this bot to:\n- Submit a Complaint (/complaint)\n- Submit a Suggestion (/suggestion)\n- Submit Feedback (/feedback)\n\nOther commands:\n/start - Show main options\n/contact - Institution contact information\n/cancel - Cancel any ongoing operation"
    contact_header': "Contact Information for {institution_name}"
    contact_details': "To contact {institution_name}:\nPhone: {phone}\nEmail: {email}\nAddress: {address}"
    complaint_intent_detected: "Welcome. If you wish to submit a complaint, you can select 'Submit Complaint' from the menu or use the /complaint command."
    suggestion_intent_detected: "Welcome. If you wish to submit a suggestion, you can select 'Submit Suggestion' from the menu or use the /suggestion command."
    contact_intent_detected: "Welcome! If you're looking for contact information for {institution_name}, you can use the /contact command directly."
    off_topic: "Hello! This bot is for receiving complaints, suggestions, and feedback related to {institution_name} services. For help, use the /help command."
    invalid_name: "The name entered is not valid. Please enter at least two words for your name." # Modified to two words
    invalid_phone: "The phone number entered is not valid. Please ensure you enter a valid phone number."
    yes: 'Yes'
    no: 'No'
    male: 'Male'
    female: 'Female'
    resident: 'Resident'
    idp: 'IDP'
    returnee: 'Returnee'
    residence_explanation: "Resident: You live in your original area.\nIDP: You moved from your original area due to circumstances.\nReturnee: You returned to your original area after a period of displacement."

# ------------------------------------------
# AI Models Configuration
# ------------------------------------------
ai_models:
  primary_model: "deepseek/deepseek-prover-v2:free" # Example, ensure this model is suitable for your tasks
  fallback_models:
    - "mistralai/mistral-small-3.1-24b-instruct:free" # Example
    - "microsoft/phi-4-reasoning:free" # Example
  base_url: "https://openrouter.ai/api/v1/chat/completions"
  timeout: 60
  max_tokens: 2048 # Max tokens for the model's response
  temperature: 0.5 # Lower for more factual, higher for more creative
  top_p: null # Example: 0.9 (alternative to temperature)
  frequency_penalty: null # Example: 0.1
  presence_penalty: null # Example: 0.1

  # Direct Hugging Face Provider (optional, if you want to use HF models directly)
  direct_fallback_enabled: true # Set to true to enable direct HF model usage
  huggingface_direct_provider:
    provider_type: "huggingface"
    api_key_env_var: "HF_API_TOKEN" # Environment variable for Hugging Face API token
    primary_model_hf: "google/gemma-7b-it" # Example free model
    fallback_models_hf: [] # Add other HF model IDs if needed
    hf_timeout: 45 # Specific timeout for Hugging Face requests
    hf_max_new_tokens: 1024 # Max new tokens for HF model responses
    hf_temperature: 0.6

# ------------------------------------------
# Cache Configuration
# ------------------------------------------
cache:
  enabled: true
  cache_dir: "app_cache" # Relative to project root
  max_cache_size: 1000 # Max number of items in in-memory cache
  ttl: 3600 # Default Time-To-Live for cache entries in seconds (1 hour)
  cleanup_interval: 600 # How often to run cleanup task, in seconds (10 minutes)
  categories:
    ai_response: { ttl: 1800, persistent: true, compress: true } # Cache AI responses for 30 mins
    beneficiary_profiles: { ttl: 7200, persistent: false, compress: false } # Cache DB lookups for beneficiary profiles for 2 hours

# ------------------------------------------
# Prompt Builder Configuration
# ------------------------------------------
prompts:
  system_template_file: "institution_system_prompt.txt" # Main system prompt file for the AI

  # General institutional information/protocols to be included in AI prompts
  institution_protocol_info: |
    Key Institution Complaint Handling Principles:
    - All interactions must be handled with utmost empathy, patience, and professional respect.
    - Beneficiary confidentiality is paramount and must be strictly maintained.
    - Critical complaints (e.g., involving safety, severe violations) should be flagged and escalated immediately according to internal protocols.
    - Provide clear and accurate information within the scope of the bot's function.
    - Guide users effectively through the complaint/suggestion submission process.

  max_context_length: 6000  # Max characters for the {context} part of the prompt
  max_prompt_length: 8000   # Max total characters for the entire system prompt sent to AI
  context_truncation_strategy: 'smart' # 'smart' or 'end'
  prompt_optimization: true # Enable or disable prompt optimization steps

# ------------------------------------------
# Logging Configuration
# ------------------------------------------
logging:
  level: "INFO" # Can be "DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"
  log_file_path: "logs/institution_bot.log" # Path relative to project root
  max_file_size_mb: 10 # Max size of a single log file before rotation
  backup_count: 5 # Number of old log files to keep
  console_output: true # Whether to also log to the console (stdout)